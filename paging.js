var almPaging={};(function(){"use strict";almPaging.init=true;window.almBuildPagination=function(data,alm){var posts_per_page=alm.orginal_posts_per_page,start=parseInt(alm.start_page),obj=alm.listing,alm_paging_controls=alm.addons.paging_controls;alm.alm_show_at_most=alm.addons.paging_show_at_most;if(alm.addons.nextpage){start=alm.addons.nextpage_startpage;posts_per_page=1;}
if(alm.addons.filters){start=parseInt(alm.addons.filters_startpage);start=(start==0)?1:start;}
var total=parseInt(data),pages=Math.ceil(total/posts_per_page);var ul=document.createElement('ul');ul.setAttribute('class','alm-paging '+alm.addons.paging_classes);ul.setAttribute('data-current-page',start);ul.setAttribute('data-total-pages',pages);if(pages<2){ul.classList.add('empty');alm.btnWrap[0].innerHTML='';}else{if(alm_paging_controls){var firstBtnLabel=(alm.addons.paging_first_label)?alm.addons.paging_first_label:'';if(firstBtnLabel!==''){var first=document.createElement('li');first.setAttribute('class','first');var firstLink=document.createElement('a');firstLink.setAttribute('data-page','1');firstLink.href=almPaging.setHref(alm,'1');var firstSpan=document.createElement('span');firstSpan.innerHTML=firstBtnLabel;firstLink.appendChild(firstSpan);first.appendChild(firstLink);ul.appendChild(first);firstLink.addEventListener('click',function(e){e.preventDefault();var parent=this.parentNode;if(!parent.classList.contains('disabled')&&!obj.classList.contains('loading')){var page=this.dataset.page;window.almSetCurrentPage(page,obj,alm);}});}
var prevBtnLabel=(alm.addons.paging_previous_label)?alm.addons.paging_previous_label:'';var prev=document.createElement('li');prev.setAttribute('class','prev');var prevLink=document.createElement('a');prevLink.setAttribute('data-page','prev');prevLink.href='#';var prevSpan=document.createElement('span');prevSpan.innerHTML=prevBtnLabel;prevLink.appendChild(prevSpan);prev.appendChild(prevLink);ul.appendChild(prev);prevLink.addEventListener('click',function(e){e.preventDefault();if(!this.parentNode.classList.contains('disabled')&&!obj.classList.contains('loading')){var current=ul.dataset.currentPage;current--;window.almSetCurrentPage(current,obj,alm);}});}
for(var i=0;i<pages;i++){var pageNum=i+1;var li=document.createElement('li');li.setAttribute('class','num');li.dataset.pageNumber=pageNum;var btn=document.createElement('a');btn.setAttribute('data-page',pageNum);btn.href=almPaging.setHref(alm,pageNum);var span=document.createElement('span');span.innerHTML=pageNum;btn.appendChild(span);btn.addEventListener('click',function(e){e.preventDefault();var parent=this.parentNode;if(!parent.classList.contains('active')&&!obj.classList.contains('loading')){var page=this.dataset.page;window.almSetCurrentPage(page,obj,alm);}});li.appendChild(btn);ul.appendChild(li);}
if(alm_paging_controls){var nextBtnLabel=(alm.addons.paging_next_label)?alm.addons.paging_next_label:'';var next=document.createElement('li');next.setAttribute('class','next');var nextLink=document.createElement('a');nextLink.setAttribute('data-page','next');nextLink.href='#';var nextSpan=document.createElement('span');nextSpan.innerHTML=nextBtnLabel;nextLink.appendChild(nextSpan);next.appendChild(nextLink);ul.appendChild(next);nextLink.addEventListener('click',function(e){e.preventDefault();if(!this.parentNode.classList.contains('disabled')&&!obj.classList.contains('loading')){var current=ul.dataset.currentPage;current++;window.almSetCurrentPage(current,obj,alm);}});var lastBtnLabel=(alm.addons.paging_last_label)?alm.addons.paging_last_label:'';if(lastBtnLabel!==''){var last=document.createElement('li');last.setAttribute('class','last');var lastLink=document.createElement('a');lastLink.setAttribute('data-page',pages);lastLink.href=almPaging.setHref(alm,pages);var lastSpan=document.createElement('span');lastSpan.innerHTML=lastBtnLabel;lastLink.appendChild(lastSpan);last.appendChild(lastLink);ul.appendChild(last);lastLink.addEventListener('click',function(e){e.preventDefault();var parent=this.parentNode;if(!parent.classList.contains('disabled')&&!obj.classList.contains('loading')){var page=this.dataset.page;window.almSetCurrentPage(page,obj,alm);}});}}
alm.btnWrap[0].innerHTML='';}
alm.btnWrap[0].appendChild(ul);window.almSetCurrentPage(start,obj,alm);};almPaging.updateNextPrevLinks=function(alm,container){var alm_paging_controls=alm.addons.paging_controls;if(alm_paging_controls&&container){var current=container.dataset.currentPage;var total=container.dataset.totalPages;var next=container.querySelector('li.next a');if(next){var upNext=(current<total)?parseInt(current)+1:total;next.href=almPaging.setHref(alm,upNext);}
var prev=container.querySelector('li.prev a');if(prev){var upPrev=(current>1)?parseInt(current)-1:1;prev.href=almPaging.setHref(alm,upPrev);}}}
almPaging.showFirstLast=function(alm,pagingWrap){var alm_paging_controls=alm.addons.paging_controls;var alm_show_at_most=alm.addons.paging_show_at_most;if(alm_paging_controls&&pagingWrap){var page=pagingWrap.dataset.currentPage;var totalPages=pagingWrap.dataset.totalPages;var alm_show_at_most=alm.addons.paging_show_at_most;var firstBtn=pagingWrap.querySelector('li.first');var lastBtn=pagingWrap.querySelector('li.last');var firstPage=pagingWrap.querySelector('li[data-page-number="1"]');var lastPage=pagingWrap.querySelector('li[data-page-number="'+totalPages+'"]');if(alm_show_at_most>totalPages){if(firstBtn){firstBtn.style.display='none';}
if(lastBtn){lastBtn.style.display='none';}}else{if(firstBtn){firstBtn.style.display=(firstPage.style.display==='none')?'inline-block':'none';}
if(lastBtn){lastBtn.style.display=(lastPage.style.display==='none')?'inline-block':'none';}}}};almPaging.setHref=function(alm,page){var href='';if(alm.addons.seo){href=alm.canonical_url+alm.addons.seo_leading_slash+'page/'+page+alm.addons.seo_trailing_slash;}else if(alm.addons.nextpage){href=alm.canonical_url+window.alm_nextpage_localize.leading_slash+page+window.alm_nextpage_localize.trailing_slash;}else{href="#";}
return href;};almPaging.fadeIn=function(element,speed){speed=speed/10;var op=0;var timer=setInterval(function(){if(op>0.9){element.style.opacity=1;clearInterval(timer);}
element.style.opacity=op;op+=0.1;},speed);};window.almFadePageControls=function(controls,speed){if(controls){var almPagingWrap=controls[0].querySelector('.alm-paging');almPaging.fadeIn(almPagingWrap,speed);}};var firstRun=true;window.almSetCurrentPage=function(current,obj,alm){current=parseInt(current);var page=current-1;var pagingWrap=alm.btnWrap[0].querySelector('.alm-paging');var totalPages=parseInt(pagingWrap.dataset.totalPages);if(totalPages<2){window.almPagingEmpty(alm);alm.btnWrap[0].style.display='none';}else{alm.btnWrap[0].style.display='';}
current=(alm.addons.preloaded==='true'&&alm.addons.seo&&almPaging.init)?current+1:current;var almReveal=obj.querySelector('.alm-reveal');if(almReveal){obj.querySelector('.alm-reveal').classList.add('loading');}
pagingWrap.dataset.currentPage=current;var firstBtn=pagingWrap.querySelector('.first');var prevBtn=pagingWrap.querySelector('.prev');if((prevBtn||firstBtn)&&current===1){if(firstBtn){firstBtn.classList.add('disabled');}
if(prevBtn){prevBtn.classList.add('disabled');}}else{if(firstBtn){firstBtn.classList.remove('disabled');}
if(prevBtn){prevBtn.classList.remove('disabled');}}
var nextBtn=pagingWrap.querySelector('.next');var lastBtn=pagingWrap.querySelector('.last');if((nextBtn||lastBtn)&&current===totalPages){if(nextBtn){nextBtn.classList.add('disabled');}
if(lastBtn){lastBtn.classList.add('disabled');}}else{if(nextBtn){nextBtn.classList.remove('disabled');}
if(lastBtn){lastBtn.classList.remove('disabled');}}
if(alm.addons.preloaded==='true'){if(almPaging.init){almPaging.init=false;page=(alm.addons.seo)?page+1:page;}}
var numbers=pagingWrap.querySelectorAll('li.num');if(numbers.length>0){for(var i=0;i<numbers.length;i++){numbers.item(i).classList.remove('active');}
numbers.item(page).classList.add('active');}
if(typeof almUpdateCurrentPage==='function'){window.almUpdateCurrentPage(page,obj,alm);}
if(alm.addons.paging&&alm.addons.filters&&typeof almFiltersPaged==='function'){almFiltersPaged(alm,firstRun);}
almPaging.positionPager(obj,alm,totalPages,current);almPaging.updateNextPrevLinks(alm,pagingWrap);firstRun=false;};almPaging.positionPager=function(obj,alm,totalPages,current){setTimeout(function(){if(alm.alm_show_at_most!=='0'&&alm.alm_show_at_most<totalPages){var show_at_most=parseInt(alm.alm_show_at_most),c=(current)?current:1,start=0;var pagingWrap=alm.btnWrap[0].querySelector('.alm-paging');var numbers=pagingWrap.querySelectorAll('li.num');for(var i=0;i<numbers.length;i++){numbers[i].style.display='none';}
if(c<=Math.round(show_at_most/2)){start=0;}else{start=c-Math.round(show_at_most/2);}
if(c>alm.alm_show_at_most){start=c-Math.round(show_at_most/2);}
if(totalPages-c<Math.round(show_at_most/2)){start=totalPages-show_at_most;}
for(var a=start;a<(show_at_most+start);a++){numbers[a].style.display='inline-block';}}
almPaging.showFirstLast(alm,pagingWrap);},alm.speed);};window.almPagingEmpty=function(alm){alm.listing.style.height='auto';alm.main.classList.remove('loading');alm.main.classList.remove('alm-is-filtering');};window.almOnPagingComplete=function(alm){var container=alm.main.querySelector('.alm-reveal');if(!container){return false;}
almPaging.setHeight(alm);var almDoScroll=false,almScrollTop=30;if(alm.addons.seo_scroll===undefined||alm.addons.seo_scroll===null||alm.addons.seo_scroll==='false'){almDoScroll=false;}else{almDoScroll=alm.addons.seo_scroll;almScrollTop=alm.addons.seo_scrolltop;}
setTimeout(function(){container.classList.remove('loading');if(almDoScroll){var offset=(typeof ajaxloadmore.getOffset==='function')?ajaxloadmore.getOffset(container).top:container.offsetTop;var top=offset-almScrollTop+1;if(typeof ajaxloadmore.almScroll==='function'){ajaxloadmore.almScroll(top);}else{window.scrollTo({top:top,behavior:'smooth'});}
setTimeout(function(){var event=document.createEvent("Event");event.initEvent("resize",false,true);window.dispatchEvent(event);},alm.speed);}},alm.speed);};almPaging.setHeight=function(alm){var container=alm.main.querySelector('.alm-reveal');if(!container){return false;}
var h=container.offsetHeight;var styles=window.getComputedStyle(alm.listing);var pTop=parseInt(styles.getPropertyValue('padding-top').replace('px',''));var pBtm=parseInt(styles.getPropertyValue('padding-bottom').replace('px',''));alm.listing.style.height=h+pTop+pBtm+'px';};window.almOnWindowResize=function(alm){almPaging.setHeight(alm);};})();
