function jsEncode(e){for(var t=(e=" "+e).split(""),o=t.length,n=[];--o;){var l=t[o].charCodeAt();l<65||l>127||l>90&&l<97?n.push("&#"+l+";"):n.push(t[o])}return n.reverse().join("")}function quote(e,t,o,n,l){try{var i="";if(window.getSelection)i=window.getSelection();else if(document.getSelection)i=document.getSelection();else{if(!document.selection)return!0;i=document.selection.createRange().text}if(""==i){var c="q-"+(n=n.split("div-comment-")[1]);for(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=document.getElementById(c).innerHTML).replace(/<div(.*?)>((.|\n)*?)(<\/div>)/gi,"")).replace(/<blockquote(.*?)>((.|\n)*?)(<\/blockquote>)/gi,"")).replace(/<blockquote(.*?)>((.|\n)*?)(<\/blockquote>)/gi,"")).replace(/\s\s/gm,"")).replace(/	/g,"")).replace(/<p>/g,"")).replace(/<\/\s*p>/g,"\n\n")).replace(/<br>/g,"")).replace(/&nbsp;/g," ")).replace(/<span(.*?)>((.|\n)*?)(<\/span>)/gi,"");i!=(i=i.replace(/<blockquote>[^>]*<\/\s*blockquote>/g,"")););i=(i=i.replace(/<a class="comment_quote_link"(.*?)>((.|\n)*?)(<\/a>)/gi,"")).replace(/<a class="comment_reply_link"(.*?)>((.|\n)*?)(<\/a>)/gi,"")}if(t){t=jsEncode(t);var s='\n<blockquote cite="comment-'+e+'">\n\n<strong><a href="#comment-'+e+'">'+unescape(t)+"</a></strong>: "+i+"</blockquote>\n"}else s='\n<blockquote cite="comment-'+e+'">\n\n'+i+"</blockquote>\n";if(1==l)insertHTML(s),insertHTML("<p>&nbsp;</p>");else addQuote(document.getElementById(o),s);return!1}catch(e){alert("Quote Comments plugin is having some trouble! It could possibly be a problem with your Wordpress theme. Does it work if you use the default theme? Does it work if you disable all other plugins? If you look in the HTML source of a page with comments, can you find <div id='q-[id]'> where [id] is the ID of the comment?")}}function inlinereply(e,t,o,n,l){try{t=jsEncode(t);var i='\n<strong><a href="#comment-'+e+'">'+unescape(t)+"</a></strong>, \n\n";if(1==l)insertHTML(i),insertHTML("<p>&nbsp;</p>");else addQuote(document.getElementById(o),i);return!1}catch(e){alert("Quote Comments plugin is having some trouble! It could possibly be a problem with your Wordpress theme. Does it work if you use the default theme? Does it work if you disable all other plugins? If you look in the HTML source of a page with comments, can you find <div id='q-[id]'> where [id] is the ID of the comment?")}}function addQuote(e,t){if(document.selection)e.focus(),sel=document.selection.createRange(),sel.text=t,e.focus();else if(e.selectionStart||"0"==e.selectionStart){var o=e.selectionStart,n=e.selectionEnd,l=n,i=e.scrollTop;e.value=e.value.substring(0,o)+t+e.value.substring(n,e.value.length),l=o+t.length,e.focus(),e.selectionStart=l,e.selectionEnd=l,e.scrollTop=i}else e.value+=t;try{ReloadTextDiv()}catch(e){}}
